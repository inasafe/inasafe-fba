CREATE OR REPLACE FUNCTION kartoza_generate_building_vulnerability() RETURNS trigger
    LANGUAGE plpgsql
AS $$
BEGIN
    SELECT
            (new.building_area_score + new.building_material_score + new.building_type_score) / 3
    INTO new.total_vulnerability
    FROM osm_buildings
    ;
    RETURN NEW;
END
$$;
